webpackJsonp([1],{"0DJU":function(t,e){},"4FRm":function(t,e){},"5+kP":function(t,e){},"5Qkr":function(t,e){},C9mR:function(t,e){},NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s={};a.d(s,"getSettings",function(){return ue}),a.d(s,"getSchema",function(){return de}),a.d(s,"getCurrentSchema",function(){return me}),a.d(s,"getCurrentItem",function(){return pe}),a.d(s,"getItemDiff",function(){return he}),a.d(s,"setCurrentItem",function(){return ve}),a.d(s,"clearCurrentItem",function(){return fe}),a.d(s,"createItem",function(){return _e}),a.d(s,"updateItem",function(){return ge}),a.d(s,"deleteItem",function(){return ye}),a.d(s,"getCurrentCollection",function(){return be}),a.d(s,"getRelationshipCollection",function(){return Ce}),a.d(s,"getMediaLibrary",function(){return De}),a.d(s,"showMediaSelector",function(){return we}),a.d(s,"setMedia",function(){return Ie}),a.d(s,"showEditView",function(){return xe}),a.d(s,"login",function(){return Se}),a.d(s,"handleCredentials",function(){return Ee}),a.d(s,"notify",function(){return Te});var i={};a.d(i,"settings",function(){return ke}),a.d(i,"schema",function(){return Ae}),a.d(i,"currentSchema",function(){return Re}),a.d(i,"currentItem",function(){return Me}),a.d(i,"itemDiff",function(){return Ue}),a.d(i,"currentCollection",function(){return Le}),a.d(i,"relationshipCollection",function(){return Ne}),a.d(i,"mediaLibrary",function(){return Ve}),a.d(i,"mediaSelector",function(){return $e}),a.d(i,"mediaSetter",function(){return Oe}),a.d(i,"editViewActive",function(){return Pe}),a.d(i,"selectedMedia",function(){return Fe}),a.d(i,"loading",function(){return je}),a.d(i,"notification",function(){return We});var r=a("7+uW"),n=a("V2hT"),o=a.n(n),l=a("Dd8w"),c=a.n(l),u=a("NYxO"),d={name:"app",methods:c()({},Object(u.b)(["getSchema","getSettings"]),{fetchSettings:function(){this.settings||this.getSettings()}}),computed:c()({},Object(u.c)(["settings"])),watch:{$route:"fetchSettings"},mounted:function(){this.getSchema(),this.getSettings()}},m={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]};var p=a("VU/8")(d,m,!1,function(t){a("PzgE")},null,null).exports,h=a("/ocq"),v=a("mvHQ"),f=a.n(v),_=a("ivXw"),g=a("mtWM"),y=a.n(g),b=a("lDdF"),C=y.a.create({baseURL:"/api/v1"});function D(){var t=localStorage.getItem("token");return t?{headers:{Authorization:t}}:{}}var w=function(t,e){var a=D(),s=c()({},a,e);return C.get(t,s).then(function(t){return t.data})},I=function(t,e,a){var s=D();s.headers["If-Match"]=a;var i=c()({},s);return C.patch(t,e,i).then(function(t){return t.data})},x=function(t,e){var a=D(),s=c()({},a);return C.post(t,e,s).then(function(t){return t.data})},S=function(t,e){var a=D();a.headers["If-Match"]=e;var s=c()({},a);return C.delete(t,s).then(function(t){return t.data})},E=function(t){var e=D(),a=c()({},e,{responseType:"blob"});return y.a.get("/export/"+t,a).then(function(t){console.log(t),Object(b.saveAs)(t.data)})},T={name:"Login",data:function(){return{loaded:!1,redirect:null,error:!1,username:null,password:null}},beforeMount:function(){window.token?(this.redirect=window.redirect,localStorage.setItem("token",window.token),this.$router.push("/")):window.redirect&&(window.location=window.redirect),this.loaded=!0},mounted:function(){document.body.style.overflow="scroll"},methods:{login:function(){var t=this;x("authenticate",{username:this.username,password:this.password}).then(function(e){e&&e.token&&(localStorage.setItem("username",t.username),localStorage.setItem("roles",f()(e.roles)),localStorage.setItem("token",e.token),t.$router.push("/"))}).catch(function(e){t.error=!0})}}},k={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.loaded?a("div",{staticClass:"padding-lg",attrs:{id:"login"}},[t.redirect?t._e():a("div",{staticClass:"row align-center"},[a("div",{staticClass:"columns small-12 medium-6 text-left"},[a("h2",[t._v("\n        Login\n      ")]),t._v(" "),t.error?a("p",{staticClass:"error"},[t._v("Login failed! Please provide proper credentials.")]):t._e()])]),t._v(" "),t.redirect?t._e():a("div",[a("div",{staticClass:"row align-center"},[a("div",{staticClass:"columns small-12 medium-6"},[a("label",{attrs:{for:""}},[t._v("Username")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.username,expression:"username"}],attrs:{type:"text"},domProps:{value:t.username},on:{input:function(e){e.target.composing||(t.username=e.target.value)}}})])]),t._v(" "),a("div",{staticClass:"row align-center"},[a("div",{staticClass:"columns small-12 medium-6"},[a("label",{attrs:{for:""}},[t._v("Password")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],attrs:{type:"password"},domProps:{value:t.password},on:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.login(e):null},input:function(e){e.target.composing||(t.password=e.target.value)}}})])]),t._v(" "),a("div",{staticClass:"row align-center"},[a("div",{staticClass:"columns small-12 medium-6 text-left"},[a("a",{staticClass:"button",attrs:{href:"#submit"},on:{click:function(e){return e.preventDefault(),t.login(e)}}},[t._v("Submit")])])])]),t._v(" "),t.redirect?a("div",[a("div",{staticClass:"row align-center padding-md"},[a("div",{staticClass:"columns small-12 medium-6 text-center"},[a("a",{staticClass:"button large",attrs:{href:t.redirect}},[t._v("Dashboard Login")])])])]):t._e()]):t._e()},staticRenderFns:[]};var A=a("VU/8")(T,k,!1,function(t){a("iFa0")},null,null).exports,R=(a("sRoY"),a("OAwv")),M=a.n(R),U={computed:c()({},Object(u.c)(["settings"])),methods:{getCloudUrl:function(t,e){var a=_.o(["global","cdn"],this.settings),s="/api/images/"+t;a&&(s=a+"/"+t);var i=e?M.a.stringify(e):null;return i?s+"?"+i:s}}},L={name:"slider",props:["value","set"],data:function(){return{slideWidth:null}},computed:{widthValue:function(){var t=this.value/2*this.slideWidth;return t?t+"px":"50%"}},methods:{setValue:function(t){var e=document.getElementById("slide-contain");this.slideWidth=e.clientWidth;var a=t.offsetX/(this.slideWidth/2);this.set(a)}}},N={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"slider-contain text-right",attrs:{id:"slide-contain"},on:{click:this.setValue}},[e("div",{staticClass:"slider-value",style:{width:this.widthValue}},[this._v(" ")]),this._v(" "),e("span",[this._v(this._s(parseInt(100*this.value))+"%")])])},staticRenderFns:[]};var V={name:"imageEditor",props:["editUrl","set","item","isImage"],components:{slider:a("VU/8")(L,N,!1,function(t){a("UDm8")},null,null).exports},data:function(){return{visual:!0,outUrl:null,contrast:1,saturation:1,blur:0,brightness:1,sharpness:1}},watch:{imageAttrs:function(){this.setUrl()},editUrl:function(){this.contrast=1,this.saturation=1,this.blur=0,this.brightness=1,this.sharpness=1}},mounted:function(){this.outUrl=this.editUrl,this.visual=this.isImage},computed:{imageAttrs:function(){return[this.contrast,this.saturation,this.blur,this.brightness,this.sharpness].join()},editable:function(){return this.item}},methods:c()({},Object(u.b)(["notify","updateItem"]),{copyUrl:function(){var t=document.createElement("textarea");t.value=this.outUrl,document.body.appendChild(t),t.focus(),t.select();try{document.execCommand("copy");this.notify({msg:"Copied to clipboard successfully!",type:"success"})}catch(t){this.notify({msg:"Copy to clipboard failed!",type:"warning"})}document.body.removeChild(t)},setUrl:function(t){if(t){var e=t.target.naturalWidth,a=t.target.naturalHeight,s=t.detail.height,i=t.detail.width,r=t.detail.x,n=t.detail.y;this.outUrl=("\n          "+this.editUrl+"\n          ?crop="+parseInt(i)+","+parseInt(s)+","+parseInt(r/e*100)+","+parseInt(n/a*100)+"\n          &contrast="+this.contrast+"\n          &saturation="+this.saturation+"\n          &blur="+5*this.blur+"\n          &brightness="+this.brightness+"\n          &sharpness="+this.sharpness+"\n        ").replace(/\s/g,"")}else{this.outUrl=("\n          "+this.outUrl.split("&",1)[0]+"\n          &contrast="+this.contrast+"\n          &saturation="+this.saturation+"\n          &blur="+5*this.blur+"\n          &brightness="+this.brightness+"\n          &sharpness="+this.sharpness+"\n        ").replace(/\s/g,"");var o=this.outUrl.split("?"),l=o[1];this.$refs.cropper.replace(o[0]+"?"+_.u(l.split("&")).join("&"),!0)}},setter:function(t){var e=this;return function(a){a&&(e[t]=a)}},editorType:function(t){this.visual=t},addTag:function(){this.item.tags.push("")},removeTag:function(t){this.item.tags.splice(t,1)},save:function(){var t=this,e={resourceType:"sitemedia",resourceId:this.item._id,payload:_.n(["item"],this.editable),etag:this.editable._etag};this.updateItem(e).then(function(e){t.notify({msg:"Item saved!",type:"success"})}).catch(function(t){})}})},$={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.editable?a("div",[a("div",{staticClass:"row controls padding-sm"},[a("div",{staticClass:"columns"},[a("div",{staticClass:"button-group alert expanded"},[t.editable&&"image"===t.editable.type?a("a",{staticClass:"button",attrs:{href:"#visual"},on:{click:function(e){e.preventDefault(),t.editorType(!0)}}},[t._v("Visual Editor")]):t._e(),t._v(" "),a("a",{staticClass:"button",attrs:{href:"#meta"},on:{click:function(e){e.preventDefault(),t.editorType(!1)}}},[t._v("Metadata Editor")])])])]),t._v(" "),t.visual&&"image"===t.editable.type?a("div",{staticClass:"row visual"},[a("div",{staticClass:"columns small-12 medium-8"},[a("p",[t._v("You are using the Visual Image Editor. No changes will be saved to your original image.")]),t._v(" "),t.editUrl?a("div",{staticClass:"image-editor"},[a("vue-cropper",{ref:"cropper",attrs:{src:t.editUrl,zoomable:!1,crop:t.setUrl}})],1):t._e()]),t._v(" "),a("div",{staticClass:"columns small-12 medium-4"},[a("div",{staticClass:"padding-sm"},[a("label",{attrs:{for:"contrast"}},[t._v("Contrast")]),t._v(" "),a("slider",{attrs:{value:t.contrast,set:t.setter("contrast")}}),t._v(" "),a("br"),t._v(" "),a("label",{attrs:{for:"contrast"}},[t._v("Saturation")]),t._v(" "),a("slider",{attrs:{value:t.saturation,set:t.setter("saturation")}}),t._v(" "),a("br"),t._v(" "),a("label",{attrs:{for:"contrast"}},[t._v("Brightness")]),t._v(" "),a("slider",{attrs:{value:t.brightness,set:t.setter("brightness")}}),t._v(" "),a("br"),t._v(" "),a("label",{attrs:{for:"contrast"}},[t._v("sharpness")]),t._v(" "),a("slider",{attrs:{value:t.sharpness,set:t.setter("sharpness")}}),t._v(" "),a("br"),t._v(" "),a("label",{attrs:{for:"contrast"}},[t._v("blur")]),t._v(" "),a("slider",{attrs:{value:t.blur,set:t.setter("blur")}}),t._v(" "),a("br")],1),t._v(" "),a("a",{staticClass:"button",attrs:{href:"#Copy"},on:{click:function(e){e.preventDefault(),t.copyUrl()}}},[t._v("Copy URL")]),t._v(" "),a("a",{staticClass:"button secondary",attrs:{href:t.outUrl,target:"_blank"}},[t._v("Visit URL")])])]):t._e(),t._v(" "),t.visual?t._e():a("div",{staticClass:"row metadata"},[a("div",{staticClass:"columns small-12 medium-8"},[a("p",[t._v("You are using the Metadata Editor. Update the tags and title for your asset.")]),t._v(" "),"image"===t.editable.type?a("img",{staticClass:"library-img",attrs:{src:t.editUrl,alt:""}}):t._e(),t._v(" "),"file"===t.editable.type?a("div",[a("b",[t._v("Content Type:")]),t._v(" "+t._s(t.editable.item.content_type)),a("br"),t._v(" "),a("b",[t._v("Name:")]),t._v(" "+t._s(t.editable.item.name)),a("br"),a("br"),t._v(" "),a("a",{staticClass:"button",attrs:{href:t.editUrl}},[t._v("Download")])]):t._e(),t._v(" "),"video"===t.editable.type?a("video",{attrs:{src:t.editUrl}}):t._e()]),t._v(" "),a("div",{staticClass:"columns small-12 medium-4"},[a("div",[a("label",{attrs:{for:""}},[t._v("\n          Title\n        ")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.editable.title,expression:"editable.title"}],attrs:{type:"text"},domProps:{value:t.editable.title},on:{input:function(e){e.target.composing||t.$set(t.editable,"title",e.target.value)}}})]),t._v(" "),a("div",[a("label",{attrs:{for:""}},[t._v("Type")]),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.editable.type,expression:"editable.type"}],attrs:{name:"type"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.editable,"type",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"image"}},[t._v("Image")]),t._v(" "),a("option",{attrs:{value:"video"}},[t._v("Video")]),t._v(" "),a("option",{attrs:{value:"file"}},[t._v("File")])])]),t._v(" "),a("div",{staticClass:"tags-form"},[a("label",{attrs:{for:""}},[t._v("\n          Tags\n        ")]),t._v(" "),t._l(t.editable.tags,function(e,s){return t.editable.tags.length>0?a("div",{staticClass:"tag row"},[a("div",{staticClass:"columns small-10"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.editable.tags[s],expression:"editable.tags[ind]"}],attrs:{type:"text"},domProps:{value:t.editable.tags[s]},on:{input:function(e){e.target.composing||t.$set(t.editable.tags,s,e.target.value)}}})]),t._v(" "),a("div",{staticClass:"columns small-1"},[a("a",{staticClass:"remove",attrs:{href:"#remove-tag"},on:{click:function(e){e.preventDefault(),t.removeTag(s)}}},[a("i",{staticClass:"fas fa-minus-circle"})])])]):t._e()}),t._v(" "),a("div",[a("a",{attrs:{href:"#new-tag"},on:{click:function(e){return e.preventDefault(),t.addTag(e)}}},[t._v("Add a tag")])])],2),t._v(" "),a("div",{staticClass:"controls padding-sm"},[a("a",{staticClass:"button",attrs:{href:"#save"},on:{click:function(e){return e.preventDefault(),t.save(e)}}},[t._v("Save")])])])])]):t._e()},staticRenderFns:[]};var O={name:"mediaLibrary",mixins:[U],props:["addToPost"],components:{imageEditor:a("VU/8")(V,$,!1,function(t){a("5+kP")},null,null).exports},mounted:function(){var t=this;this.getMediaLibrary({params:{projection:{item:0},max_results:5e3}}).then(function(){t.loading=!1}),document.body.style.overflow="scroll"},data:function(){return{loading:!0,uploading:!1,type:null,title:null,tags:[],mediaSearch:null,editor:!1,editUrl:null,editItem:null,missingRequired:[]}},computed:c()({},Object(u.c)(["mediaLibrary"]),{searched:function(){var t=this;if(this.mediaLibrary&&this.mediaLibrary._items)return this.mediaSearch?_.d(function(e){return _.b(t.mediaSearch.toLowerCase(),e.title.toLowerCase())||_.b(t.mediaSearch.toLowerCase(),_.j(function(t){return t.toLowerCase()},e.tags||[]))},this.mediaLibrary._items):this.mediaLibrary._items}}),methods:c()({},Object(u.b)(["getMediaLibrary","deleteItem","createItem","notify"]),{deleteMedia:function(t,e){var a=this;this.deleteItem({resourceType:"sitemedia",resourceId:t,etag:e}).then(function(t){a.getMediaLibrary({params:{projection:{item:0},max_results:5e3}})},function(t){})},addMedia:function(){this.missingRequired=[],this.uploading=!0},cancel:function(){this.uploading=!1,this.title=null},onFileChange:function(t){for(var e=this,a=t.target.files||t.dataTransfer.files,s=null,i=0;i<a.length;i+=1)(s=new FormData).append("item",a[i]),s.append("type",this.type),s.append("title",this.title),s.append("tags",f()(this.tags)),this.loading=!0,this.uploading=!1,this.createItem({resourceType:"sitemedia",payload:s}).then(function(){e.getMediaLibrary({params:{projection:{item:0},max_results:5e3}}).then(function(){e.loading=!1})},function(t){})},upload:function(){this.missingRequired=[],this.title&&this.type?document.querySelector("#addImage").click():(this.title||this.missingRequired.push("title"),this.type||this.missingRequired.push("type"))},copyUrl:function(t){var e=document.createElement("textarea");e.value=window.location.protocol+"//"+window.location.host+"/api/images/"+t,document.body.appendChild(e),e.focus(),e.select();try{document.execCommand("copy");this.notify({msg:"Copied to clipboard successfully!",type:"success"})}catch(t){this.notify({msg:"Copy to clipboard failed!",type:"warning"})}document.body.removeChild(e)},edit:function(t){this.editor=!0,this.editUrl=this.getCloudUrl(t._id),this.editItem=t},closeEditor:function(){this.editor=!1,this.editUrl=null,this.getMediaLibrary({params:{projection:{item:0},max_results:5e3}})},addTag:function(){this.tags.push("")},removeTag:function(t){this.tags.splice(t,1)}})},P={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"media-library"}},[t.loading?a("div",{staticClass:"loading"},[a("i",{staticClass:"fas fa-spinner loading-icon"})]):t._e(),t._v(" "),a("input",{staticClass:"hidden",attrs:{id:"addImage",type:"file",multiple:""},on:{change:function(e){t.onFileChange(e)}}}),t._v(" "),a("div",{staticClass:"row fullWidth padding-sm"},[t._m(0),t._v(" "),a("div",{staticClass:"columns small-12 medium-6 text-right"},[a("a",{staticClass:"button",attrs:{href:"#add"},on:{click:function(e){return e.preventDefault(),t.addMedia(e)}}},[t._v("Add Media")])]),t._v(" "),a("div",{staticClass:"columns small-12"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.mediaSearch,expression:"mediaSearch"}],attrs:{type:"text",placeholder:"Search media"},domProps:{value:t.mediaSearch},on:{input:function(e){e.target.composing||(t.mediaSearch=e.target.value)}}})])]),t._v(" "),t.mediaLibrary&&t.mediaLibrary._items&&0==t.mediaLibrary._items.length?a("div",{staticClass:"columns small-12"},[a("p",[t._v('There doesn\'t seem to be anything here. You can add files to the media library with the "Add Media" button.')])]):t._e(),t._v(" "),t.mediaLibrary&&t.mediaLibrary._items&&t.mediaLibrary._items.length>0?a("div",{staticClass:"row fullWidth padding-sm"},t._l(t.searched,function(e){return a("div",{staticClass:"column small-12 medium-4 large-3 library-img-contain"},["image"!==e.type&&e.type?t._e():a("img",{staticClass:"library-img",attrs:{src:t.getCloudUrl(e._id,{thumbnail:"300,300",quality:50}),alt:""}}),t._v(" "),"video"===e.type?a("video",{staticClass:"library-video",attrs:{src:t.getCloudUrl(e._id)}}):t._e(),t._v(" "),"file"===e.type?a("div",{staticClass:"file"},[a("a",{attrs:{href:t.getCloudUrl(e._id)}},[t._m(1,!0)])]):t._e(),t._v(" "),a("br"),t._v(" "),e.title?a("div",[a("b",[t._v("Title:")]),t._v(" "+t._s(e.title)),a("br")]):t._e(),t._v(" "),e.tags?a("div",[a("b",[t._v("Tags:")]),t._v(" "+t._s(e.tags.join(", "))+"\n      ")]):t._e(),t._v(" "),a("div",{staticClass:"controls padding-sm"},[a("a",{staticClass:"button alert",attrs:{href:"#delete"},on:{click:function(a){a.preventDefault(),t.deleteMedia(e._id,e._etag)}}},[t._v("Delete")]),t._v(" "),a("a",{staticClass:"button secondary",attrs:{href:"#edit"},on:{click:function(a){a.preventDefault(),t.edit(e)}}},[t._v("Edit")]),t._v(" "),a("a",{staticClass:"button",attrs:{href:"#copy"},on:{click:function(a){a.preventDefault(),t.copyUrl(e._id)}}},[t._v("Copy URL")])])])})):t._e(),t._v(" "),t.uploading?a("div",{staticClass:"upload-form-container"},[a("div",{staticClass:"upload-form"},[a("div",[a("label",{attrs:{for:""}},[t._v("Title")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.title,expression:"title"}],attrs:{type:"text"},domProps:{value:t.title},on:{input:function(e){e.target.composing||(t.title=e.target.value)}}}),t._v(" "),t.missingRequired.indexOf("title")>-1?a("p",{staticClass:"error"},[t._v("Please provide a title.")]):t._e()]),t._v(" "),a("div",[a("label",{attrs:{for:""}},[t._v("Type")]),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.type,expression:"type"}],attrs:{name:"type"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.type=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:"image"}},[t._v("Image")]),t._v(" "),a("option",{attrs:{value:"video"}},[t._v("Video")]),t._v(" "),a("option",{attrs:{value:"file"}},[t._v("File")])]),t._v(" "),t.missingRequired.indexOf("type")>-1?a("p",{staticClass:"error"},[t._v("Please select a type.")]):t._e()]),t._v(" "),a("div",{staticClass:"tags-form"},[t._l(t.tags,function(e,s){return t.tags.length>0?a("div",{staticClass:"tag row"},[a("div",{staticClass:"columns small-10"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.tags[s],expression:"tags[ind]"}],attrs:{type:"text"},domProps:{value:t.tags[s]},on:{input:function(e){e.target.composing||t.$set(t.tags,s,e.target.value)}}})]),t._v(" "),a("div",{staticClass:"columns small-1"},[a("a",{staticClass:"remove",attrs:{href:"#remove-tag"},on:{click:function(e){e.preventDefault(),t.removeTag(s)}}},[a("i",{staticClass:"fas fa-minus-circle"})])])]):t._e()}),t._v(" "),a("div",[a("a",{attrs:{href:"#new-tag"},on:{click:function(e){return e.preventDefault(),t.addTag(e)}}},[t._v("Add a tag")])])],2),t._v(" "),a("div",{staticClass:"padding-sm"},[a("a",{staticClass:"button",attrs:{href:""},on:{click:function(e){return e.preventDefault(),t.upload(e)}}},[t._v("Upload")]),t._v(" "),a("a",{staticClass:"button alert",attrs:{href:""},on:{click:function(e){return e.preventDefault(),t.cancel(e)}}},[t._v("Cancel")])])])]):t._e(),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.editor,expression:"editor"}],staticClass:"editor"},[a("a",{staticClass:"close",attrs:{href:"#close"},on:{click:function(e){e.preventDefault(),t.closeEditor()}}},[a("i",{staticClass:"fas fa-times-circle"})]),t._v(" "),a("imageEditor",{attrs:{editUrl:t.editUrl,item:t.editItem,isImage:t.editItem&&"image"===t.editItem.type}})],1)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"columns small-12 medium-6"},[e("h2",[this._v("Media Library")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"icon"},[e("i",{staticClass:"fas fa-file-alt"})])}]};var F=a("VU/8")(O,P,!1,function(t){a("jKwx")},null,null).exports,j={name:"index",mixins:[{methods:{validRoute:function(t){return!_.b(t,["accounts","configuration","users","media","sitemedia","log"])}}}],mounted:function(){document.body.style.overflow="scroll"},components:{mediaLibrary:F},computed:c()({},Object(u.c)(["schema","notification"])),methods:c()({},Object(u.b)(["notify"]),{logout:function(){localStorage.setItem("token",null),localStorage.setItem("username",null),this.$router.push("/login")},closeNotification:function(){this.notify(null)},splitResourceName:function(t){return t.replace("_"," ")}})},W={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"main-index"}},[a("transition",{attrs:{name:"notify"}},[t.notification?a("div",{staticClass:"notification",class:""+t.notification.type,on:{click:t.closeNotification}},[a("span",[t._v("\n        "+t._s(t.notification.msg)+"\n      ")])]):t._e()]),t._v(" "),t._m(0),t._v(" "),a("div",{staticClass:"row fullWidth align-right"},[a("div",{staticClass:"columns small-2 collapse main-menu padding-sm"},[t._v("\n       \n      "),a("ul",{staticClass:"resources item-list"},[a("li",{staticClass:"item"},[a("router-link",{attrs:{to:{path:"/"}}},[t._v("Main Dashboard")])],1),t._v(" "),a("li",{staticClass:"item"},[a("router-link",{attrs:{to:{name:"ItemList",params:{type:"configuration"}}}},[t._v("Site Configuration")])],1),t._v(" "),a("li",{staticClass:"item"},[a("router-link",{attrs:{to:{path:"/media"}}},[t._v("Media Library")])],1),t._v(" "),t._l(t.schema,function(e,s){return t.validRoute(s)?a("li",{staticClass:"item"},[a("router-link",{attrs:{to:{name:"ItemList",params:{type:s}}}},[t._v("\n            "+t._s(t.splitResourceName(s))+"\n          ")])],1):t._e()}),t._v(" "),a("li",{staticClass:"item"},[a("a",{attrs:{href:"#signout"},on:{click:function(e){return e.preventDefault(),t.logout(e)}}},[t._v("Sign Out")])])],2)]),t._v(" "),a("div",{staticClass:"columns small-10"},[a("router-view")],1)])],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"row fullWidth top-menu"},[e("div",{staticClass:"columns"})])}]};var H=a("VU/8")(j,W,!1,function(t){a("iFyK")},null,null).exports,q=a("pFYg"),Y=a.n(q);var G={removeMeta:function t(e){return e instanceof Array?e=_.j(t,e):"object"===(void 0===e?"undefined":Y()(e))&&null!==e&&(e=_.p(function(t,e){return!e.startsWith("_")},e),e=_.j(t,e)),e},getProperties:function(t){return _.j(function(t){return t[0]},_.s(function(t){return t[1]},_.d(function(t){return!t[0].startsWith("_")},_.j(function(t){return[t[0],_.o(["_metadata","order"],t[1])]},_.w(t)))))},getMetadataAttr:_.c(function(t,e,a){return _.o([e,"_metadata",a],t)}),getPropertySchema:_.c(function(t,e){return _.m(e,_.o([e,"schema"],t))}),getPropertyAnyOf:_.c(function(t,e){return _.o([e,"anyof"],t)})},K={props:["name","field","help","label","choices","schema","set","get","data","anyof","relationship"],computed:c()({},Object(u.c)(["currentSchema","currentItem"]),{localSchema:function(){if(this.name)return _.o([this.name,"schema"],this.schema)?_.o([this.name,"schema"],this.schema):this.schema[this.name]},properties:function(){return this.localSchema?G.getProperties(this.localSchema):G.getProperties(this.currentSchema)},propertyMetaAttr:function(){return this.localSchema?G.getMetadataAttr(this.localSchema):G.getMetadataAttr(this.currentSchema)},propertySchema:function(){return this.localSchema?G.getPropertySchema(this.localSchema):G.getPropertySchema(this.currentSchema)},propertyAnyOf:function(){return this.localSchema?G.getPropertyAnyOf(this.localSchema):G.getPropertyAnyOf(this.currentSchema)},scopedData:{get:function(){return this.data},set:function(t){""===t?this.set(null):this.set(t)}}}),methods:c()({},Object(u.b)(["getCurrentSchema","setCurrentItem","getCurrentItem","clearCurrentItem"]))},J={name:"string",mixins:[K]},z={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("label",{attrs:{for:""}},[t._v(t._s(t.label))]),t._v(" "),a("div",{staticClass:"help"},[t._v(t._s(t.help))]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.scopedData,expression:"scopedData"}],attrs:{type:"text"},domProps:{value:t.scopedData},on:{input:function(e){e.target.composing||(t.scopedData=e.target.value)}}})])},staticRenderFns:[]},B=a("VU/8")(J,z,!1,null,null,null).exports,Q={name:"richtext",mixins:[K]},X={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("label",{attrs:{for:""}},[t._v(t._s(t.label))]),t._v(" "),a("div",{staticClass:"help"},[t._v(t._s(t.help))]),t._v(" "),a("wysiwyg",{attrs:{name:t.name},model:{value:t.scopedData,callback:function(e){t.scopedData=e},expression:"scopedData"}})],1)},staticRenderFns:[]};var Z=a("VU/8")(Q,X,!1,function(t){a("biiT")},null,null).exports,tt={name:"textfield",mixins:[K]},et={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("label",{attrs:{for:""}},[t._v(t._s(t.label))]),t._v(" "),a("div",{staticClass:"help"},[t._v(t._s(t.help))]),t._v(" "),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.scopedData,expression:"scopedData"}],domProps:{value:t.scopedData},on:{input:function(e){e.target.composing||(t.scopedData=e.target.value)}}})])},staticRenderFns:[]},at=a("VU/8")(tt,et,!1,null,null,null).exports,st={name:"dropdown",mixins:[K]},it={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("label",{attrs:{for:""}},[t._v(t._s(t.label))]),t._v(" "),a("div",{staticClass:"help"},[t._v(t._s(t.help))]),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.scopedData,expression:"scopedData"}],on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.scopedData=e.target.multiple?a:a[0]}}},t._l(t.choices,function(e){return a("option",{domProps:{value:e}},[t._v(t._s(e))])}))])},staticRenderFns:[]},rt=a("VU/8")(st,it,!1,null,null,null).exports,nt={name:"imagefield",mixins:[K,U],data:function(){return{id:null,showLibrary:!1,mediaSearch:null,filedata:null,loaded:!1}},watch:{showLibrary:function(t){t?(document.body.style.height="100vh",document.body.style.overflow="hidden"):(document.body.style.height="auto",document.body.style.overflow="auto")}},created:function(){this.id=this.guid()},mounted:function(){var t=this;this.scopedData&&this.scopedData.item&&(this.filedata=this.scopedData,this.set(this.scopedData._id),this.loaded=!0),this.scopedData&&!this.scopedData.item&&w("sitemedia/"+this.scopedData).then(function(e){e&&(t.filedata=e,t.set(e._id),t.loaded=!0)})},computed:c()({},Object(u.c)(["mediaLibrary"]),{searched:function(){var t=this;if(this.mediaLibrary&&this.mediaLibrary._items)return this.mediaSearch?_.d(function(e){return _.b(t.mediaSearch.toLowerCase(),e.title.toLowerCase())},this.mediaLibrary._items):this.mediaLibrary._items},getSrc:function(){var t=this;if(this.filedata)return this.getCloudUrl(this.filedata._id);this.scopedData&&!this.scopedData.item&&w("sitemedia/"+this.scopedData).then(function(e){e&&(t.filedata=e)})}}),methods:c()({},Object(u.b)(["getMediaLibrary"]),{guid:function(){function t(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return""+t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()},addImage:function(){this.mediaLibrary._items||this.getMediaLibrary(),this.showLibrary=!0},closeLibrary:function(){this.showLibrary=!1},selectImage:function(t){this.set(t._id),this.filedata=t,this.showLibrary=!1},removeImage:function(){this.set(null)}})},ot={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"upload"},[a("label",{attrs:{for:""}},[t._v(t._s(t.label))]),t._v(" "),a("div",{staticClass:"help"},[t._v(t._s(t.help))]),t._v(" "),t.scopedData?a("div",[a("div",[t._v("\n        "+t._s(t.getSrc)+"\n        "),t.filedata&&"image"===t.filedata.type?a("img",{attrs:{src:t.getSrc,alt:""}}):t._e(),t._v(" "),t.filedata&&"file"===t.filedata.type?a("div",[a("b",[t._v("Content Type:")]),t._v(" "+t._s(t.filedata.item.content_type)),a("br"),t._v(" "),a("b",[t._v("Name:")]),t._v(" "+t._s(t.filedata.item.name)),a("br"),a("br"),t._v(" "),a("a",{staticClass:"button small secondary",attrs:{href:t.getCloudUrl(t.filedata._id),target:"_blank"}},[t._v("View File")])]):t._e(),t._v(" "),t.filedata&&"video"===t.filedata.type?a("video",{attrs:{src:t.getCloudUrl(t.filedata._id)}}):t._e()]),t._v(" "),a("a",{staticClass:"button",attrs:{href:"#remove"},on:{click:function(e){return e.preventDefault(),t.removeImage(e)}}},[t._v("Remove Media")])]):t._e(),t._v(" "),t.scopedData?t._e():a("div",[a("a",{staticClass:"button",attrs:{href:"#add"},on:{click:function(e){return e.preventDefault(),t.addImage(e)}}},[t._v("Add Media")])])]),t._v(" "),t.showLibrary?a("div",{staticClass:"library"},[a("a",{staticClass:"close",attrs:{href:"#close"},on:{click:function(e){return e.preventDefault(),t.closeLibrary(e)}}},[a("i",{staticClass:"fas fa-times-circle"})]),t._v(" "),t.mediaLibrary&&t.mediaLibrary._items&&t.mediaLibrary._items.length>0?a("div",{staticClass:"row library-content padding-lg"},[a("div",{staticClass:"columns small-12"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.mediaSearch,expression:"mediaSearch"}],attrs:{type:"text",placeholder:"Search media"},domProps:{value:t.mediaSearch},on:{input:function(e){e.target.composing||(t.mediaSearch=e.target.value)}}})]),t._v(" "),a("hr"),t._v(" "),t._l(t.searched,function(e){return a("div",{staticClass:"column small-12 medium-4 large-3 library-item"},[a("img",{staticClass:"library-img",attrs:{src:t.getCloudUrl(e._id,{thumbnail:"200,200"}),alt:""},on:{click:function(a){a.preventDefault(),t.selectImage(e)}}}),t._v(" "),"file"===e.type?a("div",[a("b",[t._v("Content Type:")]),t._v(" "+t._s(e.item.content_type)),a("br"),t._v(" "),a("b",[t._v("Name:")]),t._v(" "+t._s(e.item.name)),a("br"),a("br"),t._v(" "),a("a",{staticClass:"button",attrs:{href:"#select"},on:{click:function(a){a.preventDefault(),t.selectImage(e)}}},[t._v("select")])]):t._e(),t._v(" "),"video"===e.type?a("video",{attrs:{src:t.getCloudUrl(e._id)},on:{click:function(a){a.preventDefault(),t.selectImage(e)}}}):t._e(),t._v(" "),e.title?a("div",[t._v("\n          "+t._s(e.title)+"\n        ")]):t._e()])})],2):t._e()]):t._e()])},staticRenderFns:[]};var lt=a("VU/8")(nt,ot,!1,function(t){a("epK3")},null,null).exports,ct={name:"checkbox",mixins:[K]},ut={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("label",{attrs:{for:""}},[t._v(t._s(t.label))]),t._v(" "),a("div",{staticClass:"help"},[t._v(t._s(t.help))]),t._v(" "),a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.scopedData,expression:"scopedData"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.scopedData)?t._i(t.scopedData,null)>-1:t.scopedData},on:{change:function(e){var a=t.scopedData,s=e.target,i=!!s.checked;if(Array.isArray(a)){var r=t._i(a,null);s.checked?r<0&&(t.scopedData=a.concat([null])):r>-1&&(t.scopedData=a.slice(0,r).concat(a.slice(r+1)))}else t.scopedData=i}}}),t._v(" "+t._s(t.label)+"\n  ")])])},staticRenderFns:[]},dt=a("VU/8")(ct,ut,!1,null,null,null).exports,mt={name:"checklist",mixins:[K],computed:{scopedData:{get:function(){return this.data?this.data:[]},set:function(t){this.set(t)}}}},pt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("label",{attrs:{for:""}},[t._v(t._s(t.label))]),t._v(" "),a("div",{staticClass:"help"},[t._v(t._s(t.help))]),t._v(" "),t._l(t.choices,function(e){return a("div",{staticClass:"choice"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.scopedData,expression:"scopedData"}],attrs:{type:"checkbox",name:e},domProps:{value:e,checked:Array.isArray(t.scopedData)?t._i(t.scopedData,e)>-1:t.scopedData},on:{change:function(a){var s=t.scopedData,i=a.target,r=!!i.checked;if(Array.isArray(s)){var n=e,o=t._i(s,n);i.checked?o<0&&(t.scopedData=s.concat([n])):o>-1&&(t.scopedData=s.slice(0,o).concat(s.slice(o+1)))}else t.scopedData=r}}}),t._v("\n    "+t._s(e)+"\n  ")])})],2)},staticRenderFns:[]},ht=a("VU/8")(mt,pt,!1,null,null,null).exports,vt={name:"objectid",mixins:[K],mounted:function(){this.related||this.getRelationshipCollection({resourceType:this.relationship,params:{max_results:500}}),_.f(Object,this.data)&&(this.scopedData=this.data._id)},methods:c()({},Object(u.b)(["getRelationshipCollection"])),computed:c()({},Object(u.c)(["relationshipCollection"]),{scopedData:{get:function(){return _.f(Object,this.data)?this.data._id:this.data},set:function(t){""===t?this.set(null):_.f(Object,t)?this.set(t._id):this.set(t)}},related:function(){return this.relationshipCollection[this.relationship]?this.relationshipCollection[this.relationship]:null}})},ft={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("label",{attrs:{for:""}},[t._v(t._s(t.label))]),t._v(" "),a("div",{staticClass:"help"},[t._v(t._s(t.help))]),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.scopedData,expression:"scopedData"}],attrs:{name:"",id:""},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.scopedData=e.target.multiple?a:a[0]}}},t._l(t.related._items,function(e){return t.related&&t.related._items?a("option",{domProps:{value:e._id}},[t._v("\n      "+t._s(e.title||e.slug||e._id)+"\n    ")]):t._e()}))])},staticRenderFns:[]},_t=a("VU/8")(vt,ft,!1,null,null,null).exports,gt={name:"password",mixins:[K]},yt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("label",{attrs:{for:""}},[t._v(t._s(t.label))]),t._v(" "),a("div",{staticClass:"help"},[t._v(t._s(t.help))]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.scopedData,expression:"scopedData"}],attrs:{type:"password"},domProps:{value:t.scopedData},on:{input:function(e){e.target.composing||(t.scopedData=e.target.value)}}})])},staticRenderFns:[]},bt=a("VU/8")(gt,yt,!1,null,null,null).exports,Ct={name:"radio",mixins:[K]},Dt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("label",{attrs:{for:""}},[t._v(t._s(t.label))]),t._v(" "),a("div",{staticClass:"help"},[t._v(t._s(t.help))]),t._v(" "),t._l(t.choices,function(e){return a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.scopedData,expression:"scopedData"}],attrs:{type:"radio",id:e},domProps:{value:e,checked:t._q(t.scopedData,e)},on:{change:function(a){t.scopedData=e}}}),t._v(" "+t._s(e)+"\n  ")])})],2)},staticRenderFns:[]},wt=a("VU/8")(Ct,Dt,!1,null,null,null).exports,It={name:"slug",mixins:[K],computed:{scopedData:{get:function(){return this.data},set:function(t){var e=t.toString().toLowerCase().replace(/\s+/g,"-").replace(/[^\w\-]+/g,"").replace(/\-\-+/g,"-").replace(/^-+/,"").replace(/-+$/,"");this.set(e)}}}},xt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("label",{attrs:{for:""}},[t._v(t._s(t.label))]),t._v(" "),a("div",{staticClass:"help"},[t._v(t._s(t.help))]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.scopedData,expression:"scopedData"}],attrs:{type:"text"},domProps:{value:t.scopedData},on:{input:function(e){e.target.composing||(t.scopedData=e.target.value)}}})])},staticRenderFns:[]},St=a("VU/8")(It,xt,!1,null,null,null).exports,Et={name:"dict",mixins:[K],components:{string:B,richtext:Z,list:Gt,dropdown:rt,imagefield:lt,checkbox:dt,checklist:ht,objectid:_t,password:bt,radio:wt,simplelist:Ft,slug:St,textfield:at},computed:{scopedData:{get:function(){return this.data?this.data:{}},set:function(t){this.set(t)}}},methods:{setter:function(t){var e=this,a=function(a){e.scopedData[t]?(e.scopedData[t]=a,e.set(e.scopedData)):e.set(_.k(e.scopedData,_.m(t,a)))};return a},getter:function(t){return this.scopedData[t]}}},Tt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("label",{attrs:{for:""}},[t._v(t._s(t.label))]),t._v(" "),a("div",{staticClass:"help"},[t._v(t._s(t.help))]),t._v("\n  TEST\n  "),t._l(t.properties,function(e){return t.properties?a("div",{staticClass:"sub-field"},[a(t.propertyMetaAttr(e,"field"),{tag:"component",attrs:{name:e,help:t.propertyMetaAttr(e,"help"),label:t.propertyMetaAttr(e,"label"),choices:t.propertyMetaAttr(e,"choices"),schema:t.propertySchema(e),set:t.setter(e),data:t.getter(e)}})],1):t._e()})],2)},staticRenderFns:[]},kt=a("VU/8")(Et,Tt,!1,null,null,null).exports,At={name:"simplelist",mixins:[K],components:{string:B,richtext:Z,dropdown:rt,dict:Ht,imagefield:lt,checkbox:dt,checklist:ht,objectid:_t,password:bt,radio:wt,slug:St},watch:{scopedData:function(){}},computed:{localSchema:function(){return this.schema},scopedData:{get:function(){return this.data?this.data:[]},set:function(t){this.set(t)}}},methods:{setter:function(t){var e=this,a=function(a){e.scopedData[t]=a,e.set(e.scopedData)};return a},addItem:function(){var t=null;(t=this.data?this.data:[]).push(""),this.set(t)},getter:function(t,e){return this.scopedData[t]},removeItem:function(t){var e=this.data;e.splice(t,1),e&&0===e.length&&(e=null),this.set(e)}}},Rt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("label",{attrs:{for:""}},[t._v(t._s(t.label))]),t._v(" "),a("div",{staticClass:"help"},[t._v(t._s(t.help))]),t._v(" "),t._l(t.scopedData,function(e,s){return t.scopedData&&t.scopedData.length>0?a("div",{staticClass:"sub-field"},[a(t.propertyMetaAttr(t.name,"field"),{key:s,tag:"component",attrs:{choices:t.propertyMetaAttr(t.name,"choices"),schema:t.propertySchema(t.name),set:t.setter(s),data:t.getter(s)}}),t._v(" "),a("a",{attrs:{href:"#remove"},on:{click:function(e){e.preventDefault(),t.removeItem(s)}}},[t._v("Remove Item")])],1):t._e()}),t._v(" "),a("div",[a("a",{attrs:{href:"#add"},on:{click:function(e){return e.preventDefault(),t.addItem(e)}}},[t._v("Add Item")])])],2)},staticRenderFns:[]},Mt=a("VU/8")(At,Rt,!1,null,null,null).exports,Ut={name:"list",mixins:[K],components:{string:B,richtext:Z,dropdown:rt,dict:kt,imagefield:lt,checkbox:dt,checklist:ht,objectid:_t,password:bt,radio:wt,simplelist:Mt,slug:St,textfield:at},data:function(){return{hasFlex:!1}},computed:{scopedData:function(){return this.data?this.data:[]},localSchema:function(){return this.name&&_.o([this.name,"anyof"],this.schema)?this.schema:this.name&&!_.o([this.name,"anyof"],this.schema)?_.o([this.name,"schema"],this.schema)?_.o([this.name,"schema"],this.schema):this.schema[this.name]:void 0}},methods:{setter:function(t,e){var a=this,s=(this.hasFlex,function(s){_.o([a.name,"anyof"],a.schema)?a.scopedData[t]=a.scopedData[t]?_.k(a.scopedData[t],s):s:a.scopedData[t][e]?a.scopedData[t][e]=s:a.scopedData[t]=_.k(a.scopedData[t],_.m(e,s)),a.set(a.scopedData)});return s},getter:function(t,e){return this.hasFlex?this.scopedData[t]:this.scopedData[t][e]},addItem:function(){var t=null;(t=this.data?this.data:[]).push({}),this.set(t)},removeItem:function(t){var e=this.data;e.splice(t,1),0===e.length?this.set(null):this.set(e)}}},Lt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("label",{attrs:{for:""}},[t._v(t._s(t.label))]),t._v(" "),a("div",{staticClass:"help"},[t._v(t._s(t.help))]),t._v(" "),t._l(t.scopedData,function(e,s){return t.scopedData&&t.scopedData.length>0?a("div",[t._l(t.properties,function(e){return t.properties?a("div",{staticClass:"sub-field"},[a(t.propertyMetaAttr(e,"field"),{tag:"component",attrs:{name:e,help:t.propertyMetaAttr(e,"help"),label:t.propertyMetaAttr(e,"label"),choices:t.propertyMetaAttr(e,"choices"),schema:t.propertySchema(e),anyof:t.propertyAnyOf(e),set:t.setter(s,e),data:t.getter(s,e)}})],1):t._e()}),t._v(" "),a("a",{attrs:{href:"#remove"},on:{click:function(e){e.preventDefault(),t.removeItem(s)}}},[t._v("Remove Item")])],2):t._e()}),t._v(" "),a("div",[a("a",{attrs:{href:"#add"},on:{click:function(e){return e.preventDefault(),t.addItem(e)}}},[t._v("Add Item")])])],2)},staticRenderFns:[]},Nt={name:"flexible_content",mixins:[K],components:{string:B,richtext:Z,dropdown:rt,imagefield:lt,checkbox:dt,checklist:ht,objectid:_t,password:bt,radio:wt,slug:St,dict:kt,list:a("VU/8")(Ut,Lt,!1,null,null,null).exports,simplelist:Mt,textfield:at},data:function(){return{activeSet:null,cache:{}}},watch:{activeSet:function(t,e){var a=t?this.getFieldSetName(t):null,s=e?this.getFieldSetName(e):null;s&&a&&(this.cache=_.k(this.cache,_.m(s,this.scopedData)),this.cache[a]?this.set(this.cache[a]):this.set({}))}},mounted:function(){var t=this;this.anyof&&this.anyof.length>0&&(this.data&&this.data.template?this.activeSet=_.e(function(e){return e.schema.template.default===t.data.template})(this.anyof):this.activeSet=this.anyof[0])},computed:{localSchema:function(){return this.activeSet?this.activeSet.schema:null},properties:function(){return G.getProperties(this.localSchema)},scopedData:{get:function(){return this.data?this.data:{}},set:function(t){this.set(t)}}},methods:{isActiveSet:function(t){return this.activeSet===t},getFieldSetName:function(t){return _.o(["_metadata","label"],t)},setter:function(t){var e=this,a=function(a){if(e.scopedData[t])e.scopedData[t]=a,e.scopedData.template=_.o(["template","default"],e.localSchema),e.set(e.scopedData);else{var s=_.k(e.scopedData,_.m(t,a));s.template=_.o(["template","default"],e.localSchema),e.set(s)}};return a},getter:function(t){return this.scopedData[t]}}},Vt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("label",{attrs:{for:""}},[t._v(t._s(t.label))]),t._v(" "),a("div",{staticClass:"help"},[t._v(t._s(t.help))]),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.activeSet,expression:"activeSet"}],on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.activeSet=e.target.multiple?a:a[0]}}},t._l(t.anyof,function(e){return a("option",{domProps:{value:e}},[t._v(t._s(t.getFieldSetName(e)))])})),t._v(" "),t._l(t.anyof,function(e){return a("div",{directives:[{name:"show",rawName:"v-show",value:t.isActiveSet(e),expression:"isActiveSet(item)"}]},t._l(t.properties,function(e){return t.properties&&t.propertyMetaAttr(e,"field")?a("div",{staticClass:"sub-field"},[a(t.propertyMetaAttr(e,"field"),{tag:"component",attrs:{name:e,help:t.propertyMetaAttr(e,"help"),label:t.propertyMetaAttr(e,"label"),choices:t.propertyMetaAttr(e,"choices"),schema:t.propertySchema(e),set:t.setter(e),data:t.getter(e)}})],1):t._e()}))})],2)},staticRenderFns:[]},$t=a("VU/8")(Nt,Vt,!1,null,null,null).exports,Ot={name:"simplelist",mixins:[K],components:{string:B,richtext:Z,dropdown:rt,dict:Ht,imagefield:lt,checkbox:dt,checklist:ht,objectid:_t,password:bt,radio:wt,simplelist:Ft,slug:St,flexible_content:$t},data:function(){return{currentPage:0,searchTerm:null}},computed:{localSchema:function(){return this.schema},scopedData:function(){return this.data?this.data:[]}},methods:{setter:function(t){var e=this,a=function(a){e.scopedData[t]=a,e.set(e.scopedData)};return a},getter:function(t,e){return this.scopedData[t]},addItem:function(){var t=null;(t=this.data?this.data:[]).push(""),this.set(t),this.scopedData&&this.scopedData.length>0&&this.scopedData.length>10&&(this.currentPage=Math.ceil(this.scopedData.length/5)-1)},removeItem:function(t){var e=this.data;e.splice(t,1),this.set(e)},nextPage:function(){this.currentPage<Math.ceil(this.scopedData.length/5)-1?this.currentPage+=1:this.currentPage=Math.ceil(this.scopedData.length/5)-1},prevPage:function(){this.currentPage>0?this.currentPage-=1:this.currentPage=0},isValidItem:function(t,e){return e>=5*this.currentPage&&e<5*this.currentPage+5},isSearched:function(t){return!this.searchTerm||_.b(this.searchTerm,t)}}},Pt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("label",{attrs:{for:""}},[t._v(t._s(t.label))]),t._v(" "),a("div",{staticClass:"help"},[t._v(t._s(t.help))]),t._v(" "),t._l(t.scopedData,function(e,s){return t.scopedData&&t.scopedData.length>0&&t.scopedData.length<=10?a("div",{staticClass:"sub-field"},[a(t.propertyMetaAttr(t.name,"field"),{key:s,tag:"component",attrs:{choices:t.propertyMetaAttr(t.name,"choices"),schema:t.propertySchema(t.name),relationship:t.propertyMetaAttr(t.name,"relationship"),set:t.setter(s),data:t.getter(s)}}),t._v(" "),a("a",{attrs:{href:"#remove"},on:{click:function(e){e.preventDefault(),t.removeItem(s)}}},[t._v("Remove Item")])],1):t._e()}),t._v(" "),t.scopedData&&t.scopedData.length>0&&t.scopedData.length>10?a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.searchTerm,expression:"searchTerm"}],attrs:{type:"text",name:"search",placeholder:"Search items..."},domProps:{value:t.searchTerm},on:{input:function(e){e.target.composing||(t.searchTerm=e.target.value)}}}),t._v(" "),t._l(t.scopedData,function(e,s){return a("div",{directives:[{name:"show",rawName:"v-show",value:t.isValidItem(e,s)&&t.isSearched(e),expression:"isValidItem(value, idx) && isSearched(value)"}],staticClass:"sub-field"},[a(t.propertyMetaAttr(t.name,"field"),{key:s,tag:"component",attrs:{choices:t.propertyMetaAttr(t.name,"choices"),schema:t.propertySchema(t.name),relationship:t.propertyMetaAttr(t.name,"relationship"),set:t.setter(s),data:t.getter(s)}}),t._v(" "),a("a",{attrs:{href:"#remove"},on:{click:function(e){e.preventDefault(),t.removeItem(s)}}},[t._v("Remove Item")])],1)})],2):t._e(),t._v(" "),t.scopedData&&t.scopedData.length>0&&t.scopedData.length>10?a("div",[t.searchTerm?t._e():a("div",{staticClass:"text-center row"},[a("div",{staticClass:"columns"},[a("a",{attrs:{href:"#prev"},on:{click:function(e){return e.preventDefault(),t.prevPage(e)}}},[a("i",{staticClass:"fas fa-arrow-left"})]),t._v(" "),a("span",{staticClass:"pagecount"},[t._v("\n          Page "+t._s(t.currentPage+1)+" of "+t._s(Math.ceil(t.scopedData.length/5))+"\n        ")]),t._v(" "),a("a",{attrs:{href:"#next"},on:{click:function(e){return e.preventDefault(),t.nextPage(e)}}},[a("i",{staticClass:"fas fa-arrow-right"})])])])]):t._e(),t._v(" "),a("div",[a("a",{attrs:{href:"#add"},on:{click:function(e){return e.preventDefault(),t.addItem(e)}}},[t._v("Add Item")])])],2)},staticRenderFns:[]};var Ft=a("VU/8")(Ot,Pt,!1,function(t){a("0DJU")},null,null).exports,jt={name:"dict",mixins:[K],components:{string:B,richtext:Z,list:Gt,dropdown:rt,imagefield:lt,checkbox:dt,checklist:ht,objectid:_t,password:bt,radio:wt,simplelist:Ft,slug:St,textfield:at},computed:{scopedData:{get:function(){return this.data?this.data:{}},set:function(t){this.set(t)}}},methods:{setter:function(t){var e=this,a=function(a){e.scopedData[t]?(e.scopedData[t]=a,e.set(e.scopedData)):e.set(_.k(e.scopedData,_.m(t,a)))};return a},getter:function(t){return this.scopedData[t]}}},Wt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("label",{attrs:{for:""}},[t._v(t._s(t.label))]),t._v(" "),a("div",{staticClass:"help"},[t._v(t._s(t.help))]),t._v(" "),t._l(t.properties,function(e){return t.properties?a("div",{staticClass:"sub-field"},[a(t.propertyMetaAttr(e,"field"),{tag:"component",attrs:{name:e,help:t.propertyMetaAttr(e,"help"),label:t.propertyMetaAttr(e,"label"),choices:t.propertyMetaAttr(e,"choices"),relationship:t.propertyMetaAttr(e,"relationship"),schema:t.propertySchema(e),set:t.setter(e),data:t.getter(e)}})],1):t._e()})],2)},staticRenderFns:[]},Ht=a("VU/8")(jt,Wt,!1,null,null,null).exports,qt={name:"list",mixins:[K],components:{string:B,richtext:Z,dropdown:rt,dict:Ht,imagefield:lt,checkbox:dt,checklist:ht,objectid:_t,password:bt,radio:wt,simplelist:Ft,flexible_content:$t,slug:St,textfield:at},data:function(){return{hasFlex:!1}},computed:{scopedData:function(){return this.data?this.data:[]},localSchema:function(){return this.name&&_.o([this.name,"anyof"],this.schema)?this.schema:this.name&&!_.o([this.name,"anyof"],this.schema)?_.o([this.name,"schema"],this.schema)?_.o([this.name,"schema"],this.schema):this.schema[this.name]:void 0}},methods:{setter:function(t,e){var a=this,s=function(s){_.o([a.name,"anyof"],a.schema)?a.scopedData[t]=a.scopedData[t]&&!_.g(s)?_.k(a.scopedData[t],s):s:a.scopedData[t][e]?a.scopedData[t][e]=s:a.scopedData[t]=_.k(a.scopedData[t],_.m(e,s)),a.set(a.scopedData)};return s},getter:function(t,e){return _.o([this.name,"anyof"],this.schema)?this.scopedData[t]:this.scopedData[t][e]},addItem:function(){var t=null;(t=this.data?this.data:[]).push({}),this.set(t)},removeItem:function(t){var e=this.data;e.splice(t,1),0===e.length?this.set(null):this.set(e)}}},Yt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("label",{attrs:{for:""}},[t._v(t._s(t.label))]),t._v(" "),a("div",{staticClass:"help"},[t._v(t._s(t.help))]),t._v(" "),t._l(t.scopedData,function(e,s){return t.scopedData&&t.scopedData.length>0?a("div",[t._l(t.properties,function(e){return t.properties?a("div",{staticClass:"sub-field"},[a(t.propertyMetaAttr(e,"field"),{tag:"component",attrs:{name:e,help:t.propertyMetaAttr(e,"help"),label:t.propertyMetaAttr(e,"label"),choices:t.propertyMetaAttr(e,"choices"),relationship:t.propertyMetaAttr(e,"relationship"),schema:t.propertySchema(e),anyof:t.propertyAnyOf(e),set:t.setter(s,e),data:t.getter(s,e)}})],1):t._e()}),t._v(" "),a("a",{attrs:{href:"#remove"},on:{click:function(e){e.preventDefault(),t.removeItem(s)}}},[t._v("Remove Item")])],2):t._e()}),t._v(" "),a("div",[a("a",{attrs:{href:"#add"},on:{click:function(e){return e.preventDefault(),t.addItem(e)}}},[t._v("Add Item")])])],2)},staticRenderFns:[]},Gt=a("VU/8")(qt,Yt,!1,null,null,null).exports,Kt={components:{string:B,richtext:Z,list:Gt,dropdown:rt,dict:Ht,imagefield:lt,checkbox:dt,checklist:ht,objectid:_t,password:bt,radio:wt,simplelist:Ft,slug:St,flexible_content:$t,textfield:at},mixins:[K],name:"itemEditor",watch:{$route:"refreshData",currentItem:function(t){this.selectedVersion=t._version||null}},mounted:function(){this.refreshData(),document.body.style.overflow="hidden"},data:function(){return{loaded:!1,selectedVersion:null,showItemDiff:!1,showDeleteConfirmation:!1,errors:[]}},computed:c()({},Object(u.c)(["itemDiff"])),methods:c()({},Object(u.b)(["createItem","updateItem","deleteItem","getItemDiff","notify"]),{setter:function(t){var e=this,a=function(a){var s=e.currentItem;s[t]=a,e.setCurrentItem(s)};return a},getter:function(t){return this.currentItem[t]},refreshData:function(){var t=this;this.loaded=!1,this.clearCurrentItem();var e=this.$route.params.type,a=this.$route.params.id;this.getCurrentSchema(this.$route.params.type),a?this.getCurrentItem({resourceId:a,resourceType:e}).then(function(e){t.loaded=!0}).catch(function(e){t.$router.push({name:"Index"})}):this.loaded=!0},specifyVersion:function(t){this.selectedVersion=t,this.showItemDiff=!1,this.selectVersion()},selectVersion:function(){var t=this;this.loaded=!1;var e=this.$route.params.type,a=this.$route.params.id;a?this.getCurrentItem({resourceId:a,resourceType:e,params:{version:parseInt(this.selectedVersion)}}).then(function(e){t.loaded=!0}).catch(function(e){t.$router.push({name:"Index"})}):this.loaded=!0},showDiff:function(){var t=this,e=this.$route.params.type,a=this.$route.params.id;a?this.getItemDiff({resourceId:a,resourceType:e}).then(function(e){t.showItemDiff=!0}).catch(function(e){t.showItemDiff=!1}):this.showItemDiff=!1},saveResource:function(){var t=this,e=this.$route.params.type,a=this.$route.params.id;if(a){var s={resourceType:e,resourceId:a,payload:this.currentItem,etag:this.currentItem._etag};this.updateItem(s).then(function(e){t.notify({msg:"Item saved!",type:"success"}),t.$router.push({name:"ItemList",params:{type:t.$route.params.type}})}).catch(function(e){t.handleError(e)})}else{var i={resourceType:e,payload:this.currentItem};this.createItem(i).then(function(e){t.notify({msg:"Item saved!",type:"success"}),t.$router.push({name:"ItemList",params:{type:t.$route.params.type}})}).catch(function(e){t.handleError(e)})}},confirmDelete:function(){this.showDeleteConfirmation=!0},cancelDelete:function(){this.showDeleteConfirmation=!1},deleteResource:function(){var t=this,e={resourceType:this.$route.params.type,resourceId:this.$route.params.id,etag:this.currentItem._etag};this.deleteItem(e).then(function(e){t.$router.push({name:"ItemList",params:{type:t.$route.params.type}})},function(e){t.handleError(e)})},validDiffValue:function(t){return!_.t("_",t)},lastVersionValue:function(t,e){var a=_.r(0,e,_.j(function(e){return e[t]},this.itemDiff._items)),s=_.d(function(t){return void 0!==t&&null!==t},a);return _.i(s)},valueType:function(t){return _.f(Object,t)?"object":_.f(Array,t)?"array":"simple"},closeDiff:function(){this.getItemDiff({}),this.showItemDiff=!1},handleError:function(t){412===t.response.status&&this.notify({msg:"Oops! It looks like someone else has edited this document. Please refresh the page for the latest version.",type:"warning"}),404===t.response.status&&(this.notify({msg:"Oops! It looks like you are trying to edit a resource that no longer exists.",type:"warning"}),this.$router.push({name:"ItemList",params:{type:this.$route.params.type}})),422===t.response.status&&(this.notify({msg:"Oops! Your updates contain validation errors.",type:"warning"}),t.response.data&&t.response.data._issues&&(this.errors=_.h(t.response.data._issues))),500===t.response.status&&this.notify({msg:"Something went wrong! Please try again in a moment.",type:"warning"})},getError:function(t){return _.b(t,this.errors)}})},Jt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.loaded?a("div",{staticClass:"takeover",class:{setHeight:t.showItemDiff},attrs:{id:"main-index"}},[t.showDeleteConfirmation?a("div",{staticClass:"delete-confirmation"},[a("div",{staticClass:"padding-lg text-center confirmation"},[a("h5",[t._v("Are you sure you want to delete this item?")]),t._v(" "),a("br"),t._v(" "),a("a",{staticClass:"button warning",attrs:{href:"#delete"},on:{click:function(e){return e.preventDefault(),t.deleteResource(e)}}},[t._v("Delete")]),t._v(" "),a("a",{staticClass:"button",attrs:{href:"#cancel"},on:{click:function(e){return e.preventDefault(),t.cancelDelete(e)}}},[t._v("Cancel")])])]):t._e(),t._v(" "),a("div",{staticClass:"row align-center"},[a("div",{staticClass:"columns small-12 medium-8 padding-lg"},[a("router-link",{staticClass:"close",attrs:{to:{name:"ItemList",params:{type:t.$route.params.type}}}},[a("i",{staticClass:"fas fa-times-circle"})]),t._v(" "),t.currentItem?a("h2",{staticClass:"title-case"},[t._v("\n        "+t._s(t.currentItem.title||"New "+t.$route.params.type)+"\n      ")]):t._e(),t._v(" "),t.currentItem?a("div",{staticClass:"row"},[a("div",{staticClass:"columns shrink"},[a("b",[t._v("Current Version:")]),t._v(" "+t._s(t.currentItem._version)+"\n        ")]),t._v(" "),a("div",{staticClass:"columns"},[a("b",[t._v("Latest Version:")]),t._v(" "+t._s(t.currentItem._latest_version)+"\n        ")]),t._v(" "),a("div",{staticClass:"columns small-12 padding-sm"},[parseInt(t.currentItem._latest_version)>1?a("select",{directives:[{name:"model",rawName:"v-model",value:t.selectedVersion,expression:"selectedVersion"}],attrs:{name:"version",id:"version-select"},on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.selectedVersion=e.target.multiple?a:a[0]},t.selectVersion]}},t._l(parseInt(t.currentItem._latest_version),function(e){return a("option",{domProps:{value:e}},[t._v("\n              Version "+t._s(e)+"\n            ")])})):t._e()]),t._v(" "),t.showItemDiff?a("div",{staticClass:"diffs padding-md"},[a("a",{staticClass:"close",attrs:{href:"#closeDiff"},on:{click:function(e){return e.preventDefault(),t.closeDiff(e)}}},[a("i",{staticClass:"fas fa-times-circle"})]),t._v(" "),t._l(t.itemDiff._items,function(e,s){return a("div",{staticClass:"row align-center padding-sm"},[a("div",{staticClass:"columns small-12 medium-8"},[a("h4",[t._v("\n                Version "+t._s(e._version)+"\n              ")]),t._v(" "),a("table",[t._m(0,!0),t._v(" "),a("tbody",t._l(e,function(e,i){return t.validDiffValue(i)?a("tr",[a("td",[t._v(t._s(i))]),t._v(" "),a("td",[s>0?a("div",["simple"===t.valueType(e)?a("div",[t._v("\n                          "+t._s(t.lastVersionValue(i,s)||"Value not set")+"\n                        ")]):t._e(),t._v(" "),"array"===t.valueType(e)?a("div",t._l(t.lastVersionValue(e),function(e){return a("div",[t._v("\n                            "+t._s(e)+"\n                          ")])})):t._e(),t._v(" "),"object"===t.valueType(e)?a("div",t._l(t.lastVersionValue(e),function(e){return a("div",[t._v("\n                            "+t._s(e)+"\n                          ")])})):t._e()]):t._e(),t._v(" "),0===s?a("div",[t._v("\n                        —\n                      ")]):t._e()]),t._v(" "),a("td",["simple"===t.valueType(e)?a("div",[t._v("\n                        "+t._s(e)+"\n                      ")]):t._e(),t._v(" "),"array"===t.valueType(e)?a("div",t._l(e,function(e){return a("div",[t._v("\n                          "+t._s(e)+"\n                        ")])})):t._e(),t._v(" "),"object"===t.valueType(e)?a("div",t._l(e,function(e){return a("div",[t._v("\n                          "+t._s(e)+"\n                        ")])})):t._e()])]):t._e()}))]),t._v(" "),a("div",{staticClass:"text-right"},[a("a",{attrs:{href:"#selectVersion"},on:{click:function(a){a.preventDefault(),t.specifyVersion(parseInt(e._version))}}},[t._v("\n                  Select this version\n                ")])])])])})],2):t._e()]):t._e(),t._v(" "),t._l(t.properties,function(e){return t.propertyMetaAttr(e,"field")?a("div",{staticClass:"form-field",class:{error:t.getError(e)}},[a(t.propertyMetaAttr(e,"field"),{tag:"component",attrs:{name:e,help:t.propertyMetaAttr(e,"help"),label:t.propertyMetaAttr(e,"label"),relationship:t.propertyMetaAttr(e,"relationship"),choices:t.propertyMetaAttr(e,"choices"),schema:t.propertySchema(e),anyof:t.propertyAnyOf(e),set:t.setter(e),data:t.getter(e)}}),t._v(" "),t.getError(e)?a("div",{staticClass:"error-msg"},[t._v("\n          "+t._s(t.propertyMetaAttr(e,"error")||"This field contains errors")+"\n        ")]):t._e()],1):t._e()})],2)]),t._v(" "),a("div",{staticClass:"row align-center"},[t.$route.params.id?t._e():a("a",{staticClass:"button",attrs:{href:"#save"},on:{click:function(e){return e.preventDefault(),t.saveResource(e)}}},[t._v("Save")]),t._v(" "),t.$route.params.id?a("a",{staticClass:"button",attrs:{href:"#update"},on:{click:function(e){return e.preventDefault(),t.saveResource(e)}}},[t._v("Update")]):t._e(),t._v(" "),t.$route.params.id?a("a",{staticClass:"button alert",attrs:{href:"#delete"},on:{click:function(e){return e.preventDefault(),t.confirmDelete(e)}}},[t._v("Delete")]):t._e(),t._v(" "),a("router-link",{staticClass:"button secondary",attrs:{to:{name:"ItemList",params:{type:t.$route.params.type}}}},[t._v("Cancel")])],1)]):t._e()},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("thead",[e("tr",[e("th",{attrs:{width:"200"}},[this._v("Updated Property")]),this._v(" "),e("th",[this._v("Previous Value")]),this._v(" "),e("th",[this._v("Current Value")])])])}]};var zt=a("VU/8")(Kt,Jt,!1,function(t){a("b1bM")},null,null).exports,Bt=a("DbJJ"),Qt=a.n(Bt),Xt={components:{},name:"ItemList",data:function(){return{loaded:!1,searchTerm:null}},watch:{$route:"refreshData"},mounted:function(){this.refreshData(),document.body.style.overflow="scroll"},methods:c()({},Object(u.b)(["getCurrentCollection"]),{refreshData:function(){var t=this;this.getCurrentCollection({resourceType:this.$route.params.type,params:{max_results:500,projection:{title:1}}}).then(function(){t.loaded=!0})},exportCSV:function(){E(this.$route.params.type)}}),computed:c()({},Object(u.c)(["currentCollection"]),{listTitle:function(){return Qt()(this.$route.params.type)},itemList:function(){var t=this;return this.searchTerm?_.d(function(e){return _.b(_.v(t.searchTerm),_.v(e.title))},this.currentCollection._items):this.currentCollection._items}})},Zt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.loaded?a("div",{attrs:{id:"item-list"}},[a("div",{staticClass:"row align-center"},[a("div",{staticClass:"columns small-12 medium-8 secondary-menu padding-lg"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.searchTerm,expression:"searchTerm"}],attrs:{type:"text",placeholder:"Search "+t.listTitle.replace("_"," ")},domProps:{value:t.searchTerm},on:{input:function(e){e.target.composing||(t.searchTerm=e.target.value)}}}),t._v(" "),a("ul",{staticClass:"secondary-item-list"},t._l(t.itemList,function(e){return t.currentCollection&&t.currentCollection._items?a("li",{staticClass:"secondary-item"},[a("router-link",{attrs:{to:{name:"ItemEditor",params:{type:t.$route.params.type,id:e._id}}}},[t._v("\n            "+t._s(e.title||e.slug||e._id)+"\n          ")])],1):t._e()})),t._v(" "),a("div",{staticClass:"padding-sm"},[a("router-link",{staticClass:"button",attrs:{to:{name:"ItemCreator",params:{type:t.$route.params.type}}}},[t._v("Create New Item")]),t._v(" "),a("a",{staticClass:"button",attrs:{href:"#export"},on:{click:function(e){return e.preventDefault(),t.exportCSV(e)}}},[t._v("Export CSV")])],1)])]),t._v(" "),a("div",[a("router-view")],1)]):t._e()},staticRenderFns:[]};var te=a("VU/8")(Xt,Zt,!1,function(t){a("4FRm")},null,null).exports,ee={name:"Users",data:function(){return{superuser:!1,showUserForm:!1,username:null,password:null,confirmPassword:null,roles:[{role:"user"}],match:!1}},mounted:function(){this.setState(),document.body.style.overflow="scroll"},methods:c()({},Object(u.b)(["getCurrentCollection","createItem","notify"]),{setState:function(){var t=JSON.parse(localStorage.getItem("roles"))||[],e=_.j(function(t){return t.role},t);_.b("superuser",e)?(this.superuser=!0,this.getCurrentCollection({resourceType:"users",params:{max_results:500}})):this.getCurrentCollection({resourceType:"accounts",params:{max_results:500}})},formatRoles:function(t){return _.j(function(t){return t.role},t).join(", ")},createUser:function(){this.showUserForm=!0},sendCreateUser:function(){var t=this;this.password==this.confirmPassword?this.createItem({resourceType:"users",payload:{username:this.username,password:this.password,roles:this.roles}}).then(function(e){t.showUserForm=!1,t.notify({msg:"User created successfully!",type:"success"}),t.setState()}).catch(function(e){t.handleError(e)}):this.notify({msg:"Your passwords do not match!",type:"warning"})},closeUserForm:function(){this.showUserForm=!1},addRole:function(){this.roles=_.a({role:null},this.roles)},removeRole:function(t){this.roles=_.q(t,1,this.roles)},handleError:function(t){412===t.response.status&&this.notify({msg:"Oops! It looks like someone else has edited this document. Please refresh the page for the latest version.",type:"warning"}),404===t.response.status&&(this.notify({msg:"Oops! It looks like you are trying to edit a resource that no longer exists.",type:"warning"}),this.$router.push({name:"ItemList",params:{type:this.$route.params.type}})),422===t.response.status&&(this.notify({msg:"Oops! Your updates contain validation errors.",type:"warning"}),t.response.data&&t.response.data._issues&&(this.errors=_.h(t.response.data._issues))),500===t.response.status&&this.notify({msg:"Something went wrong! Please try again in a moment.",type:"warning"})}}),computed:c()({},Object(u.c)(["currentCollection"]))},ae={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"users"}},[a("div",{staticClass:"row align-center"},[t.showUserForm?t._e():a("div",{staticClass:"columns small-12 medium-8 secondary-menu padding-lg"},[a("h5",[t._v("Accounts Dashboard")]),t._v(" "),a("table",[t.currentCollection&&t.currentCollection._items?a("thead",[t._m(0)]):t._e(),t._v(" "),a("tbody",t._l(t.currentCollection._items,function(e){return a("tr",[a("td",[t._v(t._s(e.username))]),t._v(" "),a("td",[e.roles&&e.roles.length>0?a("span",[t._v("\n                "+t._s(t.formatRoles(e.roles))+"\n              ")]):t._e()])])}))]),t._v(" "),t.superuser?a("div",{staticClass:"createUser"},[a("a",{staticClass:"button",attrs:{href:"#createUser"},on:{click:function(e){return e.preventDefault(),t.createUser(e)}}},[t._v("Create User")])]):t._e()]),t._v(" "),t.showUserForm?a("div",{staticClass:"columns small-12 medium-8 secondary-menu padding-lg"},[a("h5",[t._v("Create User")]),t._v(" "),a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.username,expression:"username"}],attrs:{type:"text",placeholder:"your@email.com"},domProps:{value:t.username},on:{input:function(e){e.target.composing||(t.username=e.target.value)}}}),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],attrs:{type:"password",placeholder:"Password"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}}),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.confirmPassword,expression:"confirmPassword"}],attrs:{type:"password",placeholder:"Confirm Password"},domProps:{value:t.confirmPassword},on:{input:function(e){e.target.composing||(t.confirmPassword=e.target.value)}}})]),t._v(" "),a("div",{staticClass:"row"},[t._m(1),t._v(" "),t._l(t.roles,function(e,s){return a("div",{staticClass:"columns small-12"},[a("div",{staticClass:"row"},[a("div",{staticClass:"columns small-11"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.role,expression:"item.role"}],attrs:{type:"text"},domProps:{value:e.role},on:{input:function(a){a.target.composing||t.$set(e,"role",a.target.value)}}})]),t._v(" "),t.roles.length>1?a("div",{staticClass:"columns small-1"},[a("a",{attrs:{href:""},on:{click:function(e){e.preventDefault(),t.removeRole(s)}}},[a("i",{staticClass:"fas fa-minus-circle"})])]):t._e()])])}),t._v(" "),a("div",{staticClass:"columns small-12"},[a("a",{attrs:{href:"#addRole"},on:{click:function(e){return e.preventDefault(),t.addRole(e)}}},[t._v("\n            Add Role\n          ")])])],2),t._v(" "),a("hr"),t._v(" "),a("div",[a("a",{staticClass:"button",attrs:{href:"#create"},on:{click:function(e){return e.preventDefault(),t.sendCreateUser(e)}}},[t._v("Create")]),t._v(" "),a("a",{staticClass:"button secondary",attrs:{href:"#cancel"},on:{click:function(e){return e.preventDefault(),t.closeUserForm(e)}}},[t._v("Cancel")])])]):t._e()])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("tr",[e("th",{attrs:{width:"200"}},[this._v("Username")]),this._v(" "),e("th",[this._v("Roles")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"columns small-12"},[e("h6",[this._v("Roles")])])}]};var se=a("VU/8")(ee,ae,!1,function(t){a("C9mR")},null,null).exports;r.default.use(h.a);var ie=function(t,e,a){w("accounts").then(function(t){a()},function(t){a("/login")})},re=new h.a({routes:[{path:"/login",name:"Login",component:A},{path:"/",name:"Index",component:H,beforeEnter:ie,children:[{path:"",component:se},{path:"/media",component:F},{path:"/:type",name:"ItemList",beforeEnter:ie,component:te,children:[{path:"create",name:"ItemCreator",beforeEnter:ie,component:zt},{path:"edit/:id",name:"ItemEditor",beforeEnter:ie,component:zt}]}]}]});re.afterEach(function(t,e){document.body.style.overflow="scroll"});var ne=re;function oe(t){return _.j(function(t){return f()(t)},t)}function le(t){return t instanceof Array?t=_.j(le,t):"object"===(void 0===t?"undefined":Y()(t))&&null!==t&&(t=_.p(function(t,e){return!e.startsWith("_")},t),t=_.j(le,t)),t}var ce,ue=function(t){var e=t.commit;w("configuration").then(function(t){e("SETTINGS",t)})},de=function(t){var e=t.commit;w("info").then(function(t){e("SCHEMA",t)})},me=function(t,e){t.state;var a=t.commit;e&&w("info/"+e).then(function(t){a("CURRENT_SCHEMA",t)})},pe=function(t,e){var a=t.state,s=t.commit;s("LOADING",!0);var i=e.params?oe(e.params):null;return e.resourceType&&e.resourceId?w(e.resourceType+"/"+e.resourceId,{params:i}).then(function(t){i&&i.version&&(t._etag=a.currentItem?a.currentItem._etag:null),s("FORCE_CURRENT_ITEM",t),s("LOADING",!1)}):null},he=function(t,e){t.state;var a=t.commit;a("LOADING",!0);var s=e.params?oe(e.params):{};return s.version="diffs",e.resourceType&&e.resourceId?w(e.resourceType+"/"+e.resourceId,{params:s}).then(function(t){a("ITEM_DIFF",t),a("LOADING",!1)}):(a("ITEM_DIFF",null),a("LOADING",!1),null)},ve=function(t,e){t.state;(0,t.commit)("CURRENT_ITEM",e)},fe=function(t){(0,t.commit)("CLEAR_CURRENT_ITEM")},_e=function(t,e){t.state;var a=t.commit,s=null;return s="sitemedia"!==e.resourceType?le(e.payload):e.payload,x(""+e.resourceType,s).then(function(t){a("CURRENT_ITEM",{})})},ge=function(t,e){t.state;var a=t.commit,s=le(e.payload),i=e.etag;return console.log(i),I(e.resourceType+"/"+e.resourceId,s,i).then(function(t){a("CURRENT_ITEM",{})})},ye=function(t,e){t.state;var a=t.commit,s=e.etag;return S(e.resourceType+"/"+e.resourceId,s).then(function(t){return a("CURRENT_ITEM",{}),t})},be=function(t,e){t.state;var a=t.commit,s=e.params?oe(e.params):null;return e.resourceType?w(""+e.resourceType,{params:s}).then(function(t){return a("CURRENT_COLLECTION",t),t}):null},Ce=function(t,e){t.state;var a=t.commit,s=e.params?oe(e.params):null;return e.resourceType?w(""+e.resourceType,{params:s}).then(function(t){a("RELATIONSHIP_COLLECTION",_.m(e.resourceType,t))}):null},De=function(t,e){t.state;var a=t.commit,s=e&&e.params?oe(e.params):null;w("sitemedia",{params:s}).then(function(t){a("MEDIA_LIBRARY",t)})},we=function(t,e){t.state;var a=t.commit;e?(a("SHOW_MEDIA_SELECTOR",e.show),a("MEDIA_SETTER",e.setter)):(a("SHOW_MEDIA_SELECTOR",null),a("MEDIA_SETTER",null))},Ie=function(t,e){var a=t.state,s=t.commit,i=a.selectedMedia;i?i[e.guid]=e.url:(i={})[e.guid]=e.url,s("SELECTED_MEDIA",i)},xe=function(t,e){t.state;(0,t.commit)("EDIT_VIEW",e)},Se=function(t,e){t.state,t.commit;var a=btoa(e.username+":"+e.password);return w("accounts",{headers:{Authorization:"Basic "+a}})},Ee=function(t,e){t.commit;var a=e._items[0].token,s=e._items[0].username,i=e._items[0].roles;localStorage.setItem("token",a),localStorage.setItem("username",s),localStorage.setItem("roles",i)},Te=function(t,e){var a=t.commit;console.log(e),a("NOTIFICATION",e)},ke=function(t){var e=_.o(["_items"],t.settings);return e?_.l(_.j(function(t){return _.m(t.title,_.l(_.j(function(t){return _.m(t.key,t.value)},t.setting_value)))},e)):t.settings},Ae=function(t){return t.schema},Re=function(t){return t.currentSchema},Me=function(t){return t.currentItem},Ue=function(t){return t.itemDiff},Le=function(t){return t.currentCollection},Ne=function(t){return t.relationshipCollection},Ve=function(t){return t.mediaLibrary},$e=function(t){return t.mediaSelector},Oe=function(t){return t.mediaSetter},Pe=function(t){return t.editViewActive},Fe=function(t){return t.selectedMedia},je=function(t){return t.loading},We=function(t){return t.notification},He=a("bOdI"),qe=a.n(He),Ye=(ce={},qe()(ce,"SETTINGS",function(t,e){t.settings=e}),qe()(ce,"SCHEMA",function(t,e){t.schema=e}),qe()(ce,"CURRENT_SCHEMA",function(t,e){t.currentSchema=e}),qe()(ce,"CURRENT_ITEM",function(t,e){t.currentItem=c()({},t.currentItem,e)}),qe()(ce,"FORCE_CURRENT_ITEM",function(t,e){t.currentItem=null,t.currentItem=e}),qe()(ce,"ITEM_DIFF",function(t,e){t.itemDiff=e?c()({},t.itemDiff,e):{}}),qe()(ce,"CLEAR_CURRENT_ITEM",function(t){t.currentItem={}}),qe()(ce,"CURRENT_COLLECTION",function(t,e){t.currentCollection=e}),qe()(ce,"RELATIONSHIP_COLLECTION",function(t,e){t.relationshipCollection=c()({},t.relationshipCollection,e)}),qe()(ce,"MEDIA_LIBRARY",function(t,e){t.mediaLibrary=e}),qe()(ce,"SHOW_MEDIA_SELECTOR",function(t,e){t.mediaSelector=e}),qe()(ce,"MEDIA_SETTER",function(t,e){t.mediaSetter=e}),qe()(ce,"SELECTED_MEDIA",function(t,e){t.selectedMedia=c()({},t.selectedMedia,e)}),qe()(ce,"EDIT_VIEW",function(t,e){t.editViewActive=e}),qe()(ce,"STORE_TOKEN",function(t,e){t.token=e}),qe()(ce,"STORE_USERNAME",function(t,e){t.username=e}),qe()(ce,"STORE_ROLES",function(t,e){t.roles=e}),qe()(ce,"LOADING",function(t,e){t.loading=e}),qe()(ce,"NOTIFICATION",function(t,e){t.notification=e,setTimeout(function(){t.notification=null},2e3)}),ce);r.default.use(u.a);var Ge=new u.a.Store({state:{schema:{},settings:{},currentSchema:{},currentItem:{},itemDiff:{},currentCollection:{},relationshipCollection:{},mediaLibrary:[],selectedMedia:null,mediaSelector:!1,mediaSetter:null,editViewActive:!1,token:null,username:null,roles:null,loading:!1,notification:null},actions:s,getters:i,mutations:Ye});r.default.config.productionTip=!1,r.default.use(o.a,{}),new r.default({el:"#app",store:Ge,router:ne,template:"<App/>",components:{App:p}})},PzgE:function(t,e){},UDm8:function(t,e){},b1bM:function(t,e){},biiT:function(t,e){},epK3:function(t,e){},iFa0:function(t,e){},iFyK:function(t,e){},jKwx:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.851295bbac3c0be3f834.js.map